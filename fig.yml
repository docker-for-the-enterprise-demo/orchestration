database:
  image: orchardup/mysql
  environment:
    MYSQL_ROOT_PASSWORD: secret
    MYSQL_DATABASE: demo

restwebappservice:
  image: dockerfile/java:oracle-java8
  volumes_from:
    - applicationcode
  ports:
    - "8080:8080"
  links:
    - database
  command: >
    /bin/bash -c '
    java -jar app.jar
    --spring.datasource.url="jdbc:mysql://$DOCKERFORTHEENTERPRISE_DATABASE_1_PORT_3306_TCP_ADDR/$DOCKERFORTHEENTERPRISE_DATABASE_1_ENV_MYSQ_DATABASE"
    --spring.datasource.username=root 
    --spring.datasource.password="$DOCKERFORTHEENTERPRISE_DATABASE_1_ENV_MYSQL_ROOT_PASSWORD"'

applicationcode:
  # build: app-builder
  image: zanegrey/simple-spring-rest-app-builder
  volumes:
    - /data

